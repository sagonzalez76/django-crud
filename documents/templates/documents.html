<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
        header {
            background-color: rgb(0, 26, 76) !important;
        }
    </style>

</head>


<header class="navbar sticky-top flex-md-nowrap p-0 shadow" style="min-height: 50px;">
    <img src="https://www.suntic.co/wp-content/uploads/2023/08/logosimbolo-suntic-colombia.svg" alt="Logo" width="250"
        height="80" class="d-inline-block align-text-top">

    <ul class="navbar-nav flex-row d-md-none">

        <li class="nav-item text-nowrap">
            <button class="nav-link px-3 " type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu"
                aria-controls="sidebarMenu" aria-expanded="true" aria-label="Toggle navigation">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="white" class="bi bi-list"
                    viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
                </svg>
            </button>
        </li>
    </ul>

    <div id="navbarSearch" class="navbar-search w-100 collapse">
        <input class="form-control w-100 rounded-0 border-0" type="text" placeholder="Search" aria-label="Search">
    </div>
</header>

<div class="container-fluid">
    <div class="row">
        <div class="sidebar border border-right col-md-3 col-lg-2 p-0 bg-body-tertiary">
            <div class="offcanvas-md offcanvas-end bg-body-tertiary" tabindex="-1" id="sidebarMenu"
                aria-labelledby="sidebarMenuLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="sidebarMenuLabel">Suntic SAS</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebarMenu"
                        aria-label="Close"></button>
                </div>

                <div class="offcanvas-body d-md-flex flex-column p-0 pt-lg-3 overflow-y-auto">
                    <h6 class="ms-3">Documentos</h6>
                    <ul class="nav flex-column">
                        {% if user.is_staff %}
                        <li class="nav-item">
                            <a class="nav-link d-flex align-items-center gap-2 link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                href="/documents/">

                                <i class="bi bi-files"></i> Todos
                            </a>

                        </li>
                        {% endif %}

                        <li class="nav-item">
                            <a class="nav-link d-flex align-items-center gap-2 link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                href="/mydocuments/">

                                <i class="bi bi-person-rolodex"></i> Mis Documentos
                            </a>

                        </li>
                        {% if user.is_staff %}

                        <li class="nav-item">
                            <a class="nav-link d-flex align-items-center gap-2 link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                aria-current="page" href="/documents_pending/">

                                <i class="bi bi-hourglass-split"></i> Por Aprobar
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link d-flex align-items-center gap-2 link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                href="/documents_approved/">

                                <i class="bi bi-check-circle"></i> Aprobados
                            </a>
                        </li>
                        {% endif %}

                    </ul>

                    <hr class="my-2">

                    <ul class="nav flex-column mb-auto">

                        <li class="nav-item">
                            <a class="nav-link d-flex align-items-center gap-2 link-danger link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                href="/logout">
                                <i class="bi bi-door-closed"></i> Cerrar Sesion
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <div
                class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">Dashboard</h1> {{user.is_staff}}
                <a class=" btn btn-primary p-2 me-5" href="/documents/create/"> <i class="bi bi-plus"></i> Subir un
                    Documento</a>
            </div>

            {% if document.aprobador %}
            <p>
                Aprobador:
                <strong>
                    {{document.aprobador}}
                </strong>
            </p>
            {% endif %}

            <!-- <h1>Documentos por Aprobar</h1>
        <ul>
    
            {% for document in documents %}
            <li>
                <a href="{% url 'document_detail' document.id%}">
                    <h1>
                        {{document.titulo}}
                    </h1>
                    {% if document.aprobador %}
                    <p>
                        Aprobador:
                        <strong>
                            {{document.aprobador}}
                        </strong>
                    </p>
                    {% endif %}
    
                </a>
            </li>
            {% endfor %}
        </ul> -->
            <!-- <h2>Section title</h2> -->
            <div class="table-responsive small">
                <table class="table table-striped table-sm">
                    <thead>
                        <tr>
                            <th scope="col">Titulo</th>
                            <th scope="col">Descripcion</th>
                            <th scope="col">Archivo</th>
                            <th scope="col">Remitente</th>

                            <th scope="col">Aprobador</th>

                            <th scope="col">Acciones</th>

                        </tr>
                    </thead>
                    {% if documents %}
                    <tbody> {% for document in documents %}
                        <tr>
                            <td>{{document.titulo}}</td>
                            <td>{{document.descripcion}}</td>
                            <td>
                                <form action="" method="post">

                                    <a href="{% url 'descargar_archivo' document.id %}">{{ document.archivo }}</a>
                                </form>

                            </td>
                            <td>{{document.remitente}}</td>
                            {% if document.aprobador %}
                            <td>{{document.aprobador}}</td>

                            {% else %}
                            <td>Sin Aprobar</td>


                            {% endif %}




                            <td>
                                <div class="btn rounded-0-group" role="group">
                                    <a href="{% url 'document_detail' document.id%}"
                                        class="btn rounded-0 btn-outline-info"><i class="bi bi-pencil-fill"></i>
                                    </a>
                                    {% if not user.is_staff %}
                                    <form action="{% url 'deleted_document' document.id %}" method="post">
                                        {% csrf_token%}
                                        <button class="btn rounded-0 btn-outline-danger">

                                            <i class="bi bi-trash-fill"></i>
                                        </button>
                                    </form>
                                    {% endif %}

                                </div>
                            </td>
                        </tr> {% endfor %}
                        {% endif %}

                    </tbody>
                </table>
            </div>
        </main>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>